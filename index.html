<!DOCTYPE html>
<html lang="ru">
<head>
<meta charset="UTF-8">
<title>Sweet Bonanza Mini App</title>
<style>
  /* –§–æ–Ω –∏ –æ—Ñ–æ—Ä–º–ª–µ–Ω–∏–µ */
  body { margin:0; background: linear-gradient(180deg,#ffb6e6,#8b5cf6); display:flex; justify-content:center; align-items:center; height:100vh; font-family:sans-serif; }
  .game-container { text-align:center; }
  .grid-container { display:grid; grid-template-columns: repeat(6, 60px); grid-gap:5px; padding:1rem; background: rgba(255,255,255,0.15); border-radius:1rem; box-shadow:0 0 20px rgba(0,0,0,0.3); }
  .cell { width:60px; height:60px; display:flex; justify-content:center; align-items:center; font-size:28px; border-radius:10px; background: rgba(255,255,255,0.2); transition: transform 0.3s, opacity 0.3s; }
  .cell.win { transform: scale(1.5); opacity:1; }
  .buttons { margin-top:15px; }
  .buttons button { margin:5px; padding:10px 20px; border:none; border-radius:10px; font-weight:bold; color:white; cursor:pointer; box-shadow:0 0 10px rgba(0,0,0,0.3); }
  .spin { background:#ff3b9c; }
  .bonus { background:#ffce00; color:#333; }
  .info { color:white; margin-top:10px; font-weight:bold; }
</style>
</head>
<body>
<div class="game-container">
  <div id="grid" class="grid-container"></div>
  <div class="buttons">
    <button class="spin" onclick="spinGame()">SPIN</button>
    <button class="bonus" onclick="buyBonus()">BUY BONUS 100x</button>
  </div>
  <div class="info" id="info"></div>
</div>

<script>
const ROWS = 5;
const COLS = 6;
const SYMBOLS = ["üçé","üçá","üçâ","üçë","üçí","üç¨","üçå","üçã","üçç"];
const BONUS_SYMBOL = "üç≠";

let grid = [];
let balance = 1000;
let bet = 10;
let freeSpins = 0;

// Helper: —Å–ª—É—á–∞–π–Ω—ã–π —Å–∏–º–≤–æ–ª
function getRandomSymbol(isBonus=false) {
  if(isBonus && Math.random()<0.1) return BONUS_SYMBOL;
  return SYMBOLS[Math.floor(Math.random()*SYMBOLS.length)];
}

// –°–æ–∑–¥–∞—Ç—å —Å–µ—Ç–∫—É
function createGrid() {
  const gridDiv = document.getElementById('grid');
  gridDiv.innerHTML = '';
  for(let r=0;r<ROWS;r++){
    for(let c=0;c<COLS;c++){
      const cell = document.createElement('div');
      cell.className = 'cell';
      cell.textContent = grid[r][c];
      gridDiv.appendChild(cell);
    }
  }
  document.getElementById('info').textContent = `Balance: ${balance} | Free Spins: ${freeSpins}`;
}

// –ê–Ω–∏–º–∞—Ü–∏—è –≤—ã–∏–≥—Ä—ã—à–∞
function animateWin(cells) {
  cells.forEach(cell=>{
    cell.classList.add('win');
    setTimeout(()=>cell.classList.remove('win'),500);
  });
}

// Spin
function spinGame(){
  // –ì–µ–Ω–µ—Ä–∏—Ä—É–µ–º —Å–µ—Ç–∫—É
  grid = [];
  let winCells = [];
  for(let r=0;r<ROWS;r++){
    const row = [];
    for(let c=0;c<COLS;c++){
      let sym = getRandomSymbol(freeSpins>0); // –≤ –±–æ–Ω—É—Å–µ —à–∞–Ω—Å –±–æ–Ω—É—Å–Ω—ã—Ö —Å–∏–º–≤–æ–ª–æ–≤
      row.push(sym);
      if(sym===BONUS_SYMBOL) winCells.push({r,c});
    }
    grid.push(row);
  }

  // –°–ª—É—á–∞–π–Ω—ã–π –≤—ã–∏–≥—Ä—ã—à
  let win = Math.floor(Math.random()*bet*5);
  balance = balance - bet + win;

  // –ò—Å–ø–æ–ª—å–∑—É–µ–º Free Spins
  if(freeSpins>0) freeSpins--;

  createGrid();

  // –ê–Ω–∏–º–∞—Ü–∏—è –±–æ–Ω—É—Å–Ω—ã—Ö —Å–∏–º–≤–æ–ª–æ–≤
  winCells.forEach(pos=>{
    const cellIndex = pos.r*COLS + pos.c;
    const cellDiv = document.getElementById('grid').children[cellIndex];
    animateWin([cellDiv]);
  });

  // –ï—Å–ª–∏ 4+ –±–æ–Ω—É—Å–∞ ‚Äî —Ç—Ä–∏–≥–≥–µ—Ä Free Spins
  if(winCells.length>=4){
    freeSpins += 10;
    alert("üéâ Bonus Triggered! 10 Free Spins!");
  }
}

// Buy Bonus
function buyBonus(){
  const cost = bet*100;
  if(balance<cost){ alert('–ù–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –±–∞–ª–∞–Ω—Å–∞'); return; }
  balance -= cost;
  freeSpins += 10;
  createGrid();
  alert("üéÅ Bought 10 Free Spins!");
}

// –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è —Å–µ—Ç–∫–∏
for(let r=0;r<ROWS;r++){
  const row = [];
  for(let c=0;c<COLS;c++){
    row.push(getRandomSymbol());
  }
  grid.push(row);
}
createGrid();
</script>
</body>
</html>
